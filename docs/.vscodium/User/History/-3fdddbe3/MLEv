#!/usr/bin/luajit

-- function lines(s)
--   if s:sub(-1)~="\n" then s=s.."\n" end
--   return s:gmatch("(.-)\n")
-- end

Filename = io.stdin:read()
Input = io.stdin:read("*all")

if Input:find("{{date}}") then
  local start_i, end_i = Input:find("{{date}}")
  local first = Input:sub(1, start_i+2)
  local last = Input:sub(end_i-2)

  local command = "date -r " .. Filename .. " +%d%m%y"
  local f = io.popen(command)
  local last_modified = f:read()
  print(first, last_modified, last)
else
  print(Input)
end
