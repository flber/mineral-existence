#!/usr/bin/luajit

Filename = io.stdin:read()
Input = io.stdin:read("*all")

if Input:find("{{date}}") then
  local date = generate_date()
  print(Input:gsub("{{date}}", date))
else
  print(Input)
end

local function generate_date()
  local command = "date -r " .. Filename .. " +%d%m%y"
  local f = io.popen(command)
  return f:read()
end